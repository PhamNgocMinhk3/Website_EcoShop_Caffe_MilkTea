<!-- Container chÃ­nh cá»§a trang -->
<div class="page-container">
    <!-- Báº£ng lá»‹ch lÃ m viá»‡c -->
    <main class="calendar-panel">
        <!-- Header cá»§a báº£ng lá»‹ch, chá»©a Ä‘iá»u hÆ°á»›ng tuáº§n vÃ  tiÃªu Ä‘á» -->
        <header class="calendar-header">
            <button class="nav-btn" (click)="previousWeek()">
                <span class="material-symbols-outlined">
                    ðŸ‘ˆ
                </span>
            </button>
            <h2 class="week-title">
                Tuáº§n: {{ weekStartDate | date : 'dd/MM' }} -
                {{ weekDates[6] | date : 'dd/MM/yyyy' }}
            </h2>
            <button class="nav-btn" (click)="nextWeek()">
                <span class="material-symbols-outlined"> ðŸ‘‰
                </span>
            </button>
        </header>

        <!-- Container cho phÃ©p cuá»™n báº£ng -->
        <div class="table-scroll-container">
            <!-- Hiá»ƒn thá»‹ loading spinner khi Ä‘ang táº£i dá»¯ liá»‡u -->
            <div *ngIf="isLoading" class="loading-overlay">
                <div class="spinner"></div>
            </div>

            <!-- Báº£ng lá»‹ch lÃ m viá»‡c -->
            <table class="schedule-table" *ngIf="!isLoading">
                <thead>
                    <tr>
                        <th class="shift-header-cell">Ca</th>
                        <!-- Hiá»ƒn thá»‹ cÃ¡c ngÃ y trong tuáº§n -->
                        <th *ngFor="let day of weekDates" class="day-header-cell">
                            {{ day | date : 'EEEE' : 'vi' }} <br />
                            <span class="day-date">{{ day | date : 'dd/MM' }}</span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Láº·p qua cÃ¡c ca lÃ m viá»‡c (SÃ¡ng, Chiá»u, Tá»‘i) -->
                    <ng-container *ngFor="let shift of shifts">
                        <!-- Láº·p qua cÃ¡c Ã´ trong má»—i ca -->
                        <tr *ngFor="let slot of shift.slots; let i = index">
                            <!-- Hiá»ƒn thá»‹ tÃªn ca á»Ÿ Ã´ Ä‘áº§u tiÃªn -->
                            <td *ngIf="i === 0" class="shift-cell" [rowSpan]="shift.slots.length">
                                <div>
                                    <span>{{ shift.name }}</span>
                                </div>
                            </td>

                            <!-- CÃ¡c Ã´ hiá»ƒn thá»‹ phÃ¢n cÃ´ng -->
                            <td *ngFor="let day of weekDates" class="schedule-cell">
                                <div class="assignment-wrapper">
                                    <!-- Kiá»ƒm tra vÃ  hiá»ƒn thá»‹ thÃ´ng tin nhÃ¢n viÃªn Ä‘Æ°á»£c phÃ¢n cÃ´ng -->
                                    <div *ngIf="schedule[format(day, 'yyyy-MM-dd')]?.[slot] as assignment"
                                        class="assignment-chip">
                                        <span>{{ assignment.hoTen }}</span>
                                        <!-- KhÃ´ng cÃ³ nÃºt xÃ³a á»Ÿ Ä‘Ã¢y -->
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </ng-container>
                </tbody>
            </table>
        </div>
    </main>
</div>